generator client { provider = "prisma-client-js" }

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Deal {
  id         Int       @id          // use upstream id if you have one
  name       String
  liquidity  Int
  buff       Float
  csgoTm     Float
  vol7d      Int
  purch      Int
  target     Float
  youpin     Float
  margin     Float
  sku        String?   // optional stable key if source provides one
  deletedAt  DateTime?
  updatedAt  DateTime  @updatedAt
  createdAt  DateTime  @default(now())
}

model DealBlacklist {
  id         Int       @id @default(autoincrement())
  key        String
  price      Float      // threshold; new deals must be LOWER than this to show
  expiresAt  DateTime   // now + 24h; sliding window
  createdAt  DateTime   @default(now())

  @@index([key, expiresAt])
}
